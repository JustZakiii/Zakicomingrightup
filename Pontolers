-- Load library
local library = loadstring(game:HttpGet('https://raw.githubusercontent.com/cueshut/saves/main/criminality%20paste%20ui%20library'))()

-- Constants for easier access
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Knit = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("Knit"):WaitForChild("Services"):WaitForChild("TycoonService")
local RF = Knit:WaitForChild("RF")
local RE = Knit:WaitForChild("RE")

-- Window
local window = library.new('Coffee Shop Tycoon', 'leadmarker')

-- Tabs
local tab = window.new_tab('rbxassetid://4483345998')
local tab1 = window.new_tab('rbxassetid://4483345998')

-- Sections
local section = tab.new_section('Tab 1')
local section1 = tab.new_section('Tab 2')

-- Sectors
local sector = section.new_sector('Essentials', 'Left')
local sector1 = section.new_sector('Others', 'Right')

-- Function to invoke server function
local function invokeServerFunction(functionName)
    RF:WaitForChild("InvokeTopic"):InvokeServer(functionName)
end

-- Elements

-- Refill Quick button
sector.element('Button', 'Refill Quick', nil, function()
    invokeServerFunction("Bakery1_Restock")
    invokeServerFunction("CoffeeBeans_Restock")
    invokeServerFunction("ToppingStock_Restock")
end)

-- Auto Add Toppings Toggle
local isRunning = false
sector.element('Toggle', 'Auto Add Toppings', false, function(v)
    if v.Toggle then
        if not isRunning then
            isRunning = true
            spawn(function()
                while isRunning do
                    for _, station in ipairs({"ToppingStation1", "ToppingStation2", "ToppingStation3"}) do
                        for i = 1, 30 do
                            invokeServerFunction(station .. "_DroppedTopping")
                        end
                    end
                    wait(0.5)
                end
            end)
        end
    else
        isRunning = false
        print("Auto Add Toppings turned off")
    end
end)

-- Auto Clean Trash Toggle
local toggle2Enabled = false
sector.element('Toggle', 'Auto Clean Trash', false, function(v)
    toggle2Enabled = v.Toggle
    if toggle2Enabled then
        spawn(function()
            local stoolsAndTables = {
                "HighStool1", "HighStool2", "HighStool3",
                "TwoTable1", "TwoTable2", "TwoTable3", "TwoTable4",
                "TwoTable6", "TwoTable7", "TwoTable8", "TwoTable9", "TwoTable10", "TwoTable11"
            }

            while toggle2Enabled do
                local player = game.Players.LocalPlayer
                local playerPos = player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player.Character.HumanoidRootPart.Position

                if playerPos then
                    for _, stoolName in ipairs(stoolsAndTables) do
                        local stool = game.Workspace.Map.Tycoons.PlayerTycoons["xXalzaki4themasterXx's Tycoon"][stoolName]
                        if stool then
                            local trash = stool:FindFirstChild("Trash")
                            if trash then
                                local cleanTrashPrompt = trash:FindFirstChild("PromptPart") and trash.PromptPart:FindFirstChild("CleanTrash")
                                if cleanTrashPrompt and trash.PromptPart and (trash.PromptPart.Position - playerPos).Magnitude <= 10 then
                                    fireproximityprompt(cleanTrashPrompt, 1, true)
                                    print("CleanTrash prompt fired for " .. stoolName)
                                    break
                                end
                            end
                        end
                    end
                end

                wait(0.5)
            end
        end)
    else
        print("Auto Clean Trash turned off")
    end
end)

-- Function to enable/disable Auto Clean Trash
local function setToggle2Enabled(enabled)
    toggle2Enabled = enabled
end

-- Example usage:
-- setToggle2Enabled(false) -- Disable toggle2
-- setToggle2Enabled(true)  -- Enable toggle2
